<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Authorization | Hyperion</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/icons/favicon-128x128.png">
    <link rel="icon" type="image/ico" href="/icons/favicon.ico">
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-828x1792.png">
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" href="/icons/apple-launch-1125x2436.png">
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" href="/icons/apple-launch-1242x2688.png">
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-750x1334.png">
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)" href="/icons/apple-launch-1242x2208.png">
    <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-640x1136.png">
    <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-1536x2048.png">
    <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-1668x2224.png">
    <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-1668x2388.png">
    <link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-2048x2732.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/apple-icon-167x167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#fff">
    <meta name="description" content="Hyperion Ambient Light documentation">
    <meta name="theme-color" content="#2b81a0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Hyperion Documentation">
    <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#2b81a0">
    <link rel="preload" href="/assets/css/0.styles.83e9b54b.css" as="style"><link rel="preload" href="/assets/js/app.3fa343a7.js" as="script"><link rel="preload" href="/assets/js/2.16f09a8a.js" as="script"><link rel="preload" href="/assets/js/19.f0c828a3.js" as="script"><link rel="preload" href="/assets/js/4.a333783b.js" as="script"><link rel="prefetch" href="/assets/js/10.23f56594.js"><link rel="prefetch" href="/assets/js/11.f9d93b39.js"><link rel="prefetch" href="/assets/js/12.d089833a.js"><link rel="prefetch" href="/assets/js/13.6f012652.js"><link rel="prefetch" href="/assets/js/14.9ef182a3.js"><link rel="prefetch" href="/assets/js/15.ac53e7e0.js"><link rel="prefetch" href="/assets/js/16.d48b21fc.js"><link rel="prefetch" href="/assets/js/17.9ec82d3f.js"><link rel="prefetch" href="/assets/js/18.70f7fe92.js"><link rel="prefetch" href="/assets/js/20.f8a7213c.js"><link rel="prefetch" href="/assets/js/21.e7e6de69.js"><link rel="prefetch" href="/assets/js/22.8e0cabd1.js"><link rel="prefetch" href="/assets/js/23.0aa9488e.js"><link rel="prefetch" href="/assets/js/24.5f7b667f.js"><link rel="prefetch" href="/assets/js/25.ccefedff.js"><link rel="prefetch" href="/assets/js/26.edc2a867.js"><link rel="prefetch" href="/assets/js/27.e6ea72f6.js"><link rel="prefetch" href="/assets/js/28.6af3c074.js"><link rel="prefetch" href="/assets/js/29.473d6f8f.js"><link rel="prefetch" href="/assets/js/3.d2a9a079.js"><link rel="prefetch" href="/assets/js/30.81b5c05b.js"><link rel="prefetch" href="/assets/js/31.983dc35c.js"><link rel="prefetch" href="/assets/js/32.48c0800f.js"><link rel="prefetch" href="/assets/js/5.47840f41.js"><link rel="prefetch" href="/assets/js/6.9367514b.js"><link rel="prefetch" href="/assets/js/7.b7ccec3b.js"><link rel="prefetch" href="/assets/js/8.926dd2a7.js"><link rel="prefetch" href="/assets/js/9.131f33d8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.83e9b54b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/hyperion-logo.png" alt="Hyperion" class="logo"> <span class="site-name can-hide">Hyperion</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/user/" class="nav-link">
  User
</a></div><div class="nav-item"><a href="/en/effects/" class="nav-link">
  Effects
</a></div><div class="nav-item"><a href="/en/json/" class="nav-link router-link-active">
  Json API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/json/Authorization.html" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/de/" class="nav-link">
  Deutsch
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/user/" class="nav-link">
  User
</a></div><div class="nav-item"><a href="/en/effects/" class="nav-link">
  Effects
</a></div><div class="nav-item"><a href="/en/json/" class="nav-link router-link-active">
  Json API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/json/Authorization.html" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/de/" class="nav-link">
  Deutsch
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JSON</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/json/" class="sidebar-link">JSON RPC Introduction</a></li><li><a href="/en/json/ServerInfo.html" class="sidebar-link">Sever Information</a></li><li><a href="/en/json/Control.html" class="sidebar-link">Control</a></li><li><a href="/en/json/Authorization.html" class="active sidebar-link">Authorization</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/json/Authorization.html#authorization" class="sidebar-link">Authorization</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/json/Authorization.html#token-system" class="sidebar-link">Token System</a></li><li class="sidebar-sub-header"><a href="/en/json/Authorization.html#authorization-check" class="sidebar-link">Authorization Check</a></li><li class="sidebar-sub-header"><a href="/en/json/Authorization.html#login-with-token" class="sidebar-link">Login with Token</a></li><li class="sidebar-sub-header"><a href="/en/json/Authorization.html#login-with-token-over-http-s" class="sidebar-link">Login with Token over HTTP/S</a></li><li class="sidebar-sub-header"><a href="/en/json/Authorization.html#logout" class="sidebar-link">Logout</a></li><li class="sidebar-sub-header"><a href="/en/json/Authorization.html#request-a-token" class="sidebar-link">Request a Token</a></li></ul></li></ul></li><li><a href="/en/json/Subscribe.html" class="sidebar-link">Subscription</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Misc</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/api/Detect.html" class="sidebar-link">Detect Hyperion</a></li><li><a href="/en/api/Guidelines.html" class="sidebar-link">Guidelines</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="authorization"><a href="#authorization" class="header-anchor">#</a> Authorization</h2> <p>Hyperion has an authorization system where people can login via password and applications with Tokens. The user can decide how strong or weak the Hyperion API should be protected.</p> <p></p><div class="table-of-contents"><ul><li><a href="#authorization">Authorization</a><ul><li><a href="#token-system">Token System</a></li><li><a href="#authorization-check">Authorization Check</a></li><li><a href="#login-with-token">Login with Token</a></li><li><a href="#login-with-token-over-http-s">Login with Token over HTTP/S</a></li><li><a href="#logout">Logout</a></li><li><a href="#request-a-token">Request a Token</a></li></ul></li></ul></div><p></p> <h3 id="token-system"><a href="#token-system" class="header-anchor">#</a> Token System</h3> <p>Tokens are a simple way to authenticate an App for API access. They can be created &quot;by hand&quot; TODO LINK TO WEBUI TOKEN CREATION at the webconfiguration or your application can <a href="#request-a-token">request one</a>.</p> <h3 id="authorization-check"><a href="#authorization-check" class="header-anchor">#</a> Authorization Check</h3> <p>It's for sure useful to check if you actually need an authorization to work with the API. Ask Hyperion by sending</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;tokenRequired&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If the property &quot;required&quot; is true, you need authentication. Example response.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-tokenRequired&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;info&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;required&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tan&quot;</span> <span class="token operator">:</span><span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="login-with-token"><a href="#login-with-token" class="header-anchor">#</a> Login with Token</h3> <p>Login with your token as follows. And get a <a href="#login-response">Login response</a></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;YourPrivateTokenHere&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="login-with-token-over-http-s"><a href="#login-with-token-over-http-s" class="header-anchor">#</a> Login with Token over HTTP/S</h3> <p>Add the HTTP Authorization header to every request. On error, you will get a failed <a href="#login-response">Login response</a></p> <div class="language-http extra-class"><pre class="language-http"><code>  Authorization : token YourPrivateTokenHere
</code></pre></div><h4 id="login-response"><a href="#login-response" class="header-anchor">#</a> Login response</h4> <p>Login success response</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-login&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tan&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Login failed response</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-login&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;error&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;No Authorization&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tan&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="logout"><a href="#logout" class="header-anchor">#</a> Logout</h3> <p>You can also logout. Hyperion doesn't verify the login state, it will be always a success.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;logout&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Response</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-logout&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tan&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>A Logout will stop all streaming data services and subscriptions</p></div> <h3 id="request-a-token"><a href="#request-a-token" class="header-anchor">#</a> Request a Token</h3> <p>If you want to get the most comfortable way for your application to authenticate</p> <ul><li>You ask Hyperion for a token along with a comment (A text which identifies you as the sender, meaningful informations are desired - appname + device) and a short random created id (numbers/letters)</li> <li>Wait for the response, the user needs to accept the request from the webconfiguration</li> <li>-&gt; On success you get a UUID token which is now your personal app token</li> <li>-&gt; On error you won't get a token, in this case the user denied the request or it timed out (180s).</li> <li>Now you are able to access the api, your access can be revoked by the user at any time, but will last for current connected sessions.</li></ul> <p>Requesting a token is easy, just send the follwing command, make sure to add a sufficient comment. The &quot;id&quot; field has 5 random chars created by yourself. And add a meaningful comment.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;requestToken&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;comment&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;OpenHab 2 Binding&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;T3c91&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now you wait for the response, show a popup that the user should login to the webconfiguration and accept the token request. Show the comment and the id so that the user can confirm the origin properly. After 180 seconds without a user action, the request is automatically rejected. You will get a notification about the failure.</p> <h4 id="success-response"><a href="#success-response" class="header-anchor">#</a> Success response</h4> <p>If the user accepted your token request you will get the following message.</p> <ul><li>Save the token somewhere for further use, it doesn't expire.</li> <li>Be aware that a user can revoke the access. It will last for current connected sessions.</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-requestToken&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;comment&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;OpenHab2 Binding&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;T3c91&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;YourPrivateTokenHere&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="failed-response"><a href="#failed-response" class="header-anchor">#</a> Failed response</h4> <p>A request will fail when</p> <ul><li>Timeout - no user action for 180 seconds</li> <li>User denied the request</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-requestToken&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;error&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Token request timeout or denied&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="request-abort"><a href="#request-abort" class="header-anchor">#</a> Request abort</h4> <p>You can abort the request by adding an &quot;accept&quot; property to the original request. The request will be deleted</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;requestToken&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;comment&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;OpenHab 2 Binding&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;T3c91&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;accept&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/hyperion-project/hyperion.ng/edit/master/docs/docs/en/json/Authorization.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/27/2020, 8:33:39 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/json/Control.html" class="prev">
        Control
      </a></span> <span class="next"><a href="/en/json/Subscribe.html">
        Subscription
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.3fa343a7.js" defer></script><script src="/assets/js/2.16f09a8a.js" defer></script><script src="/assets/js/19.f0c828a3.js" defer></script><script src="/assets/js/4.a333783b.js" defer></script>
  </body>
</html>
